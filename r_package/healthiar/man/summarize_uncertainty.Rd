% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/summarize_uncertainty.R
\name{summarize_uncertainty}
\alias{summarize_uncertainty}
\title{Get Monte Carlo confidence intervals}
\usage{
summarize_uncertainty(output_attribute, n_sim, seed = NULL)
}
\arguments{
\item{output_attribute}{\code{variable} in which the results of an \code{healthiar::attribute_...()} function are stored.}

\item{n_sim}{\code{numeric value} indicating the number of simulations to be performed.}

\item{seed}{\code{numeric value} for fixing the randomization. If empty, 123 is used as a default.}
}
\value{
This function returns confidence intervals for the attributable health impacts using a Monte Carlo simulation.
}
\description{
This function determines summary uncertainty (based on at least one input variable
with central, lower and upper estimate) based on attribute() or compare()
function output.

Input variables that can included in the Monte Carlo simulation: relative risk, exposure, cutoff, baseline health data, disability weight, duration.
}
\details{
Distributions used for simulation

Relative risk values are simulated based on an optimized gamma distribution, which fits well as relative risks are positive and its distributions usually right-skewed. The gamma distribution best fitting the inputted central relative risk estimate and corresponding lower and upper 95\% confidence interval values is fitted using \code{stats::qgamma()} (with \code{rate = shape / rr_central}) and then \code{stats::optimize} is used to optimize the distribution parameters. Finally, \code{n_sim} relative risk values are simulated using \code{stats::rgamma()}.

Exposure values are simulated based on a normal distribution using \code{stats::rnorm()} with \code{mean = exp_central} and a standard deviation based on corresponding lower and upper 95\% exposure confidence interval values.

Cutoff values are simulated based on a normal distribution using \code{stats::rnorm()} with \code{mean = cutoff_central} and a standard deviation based on corresponding lower and upper 95\% cutoff confidence interval values.

Baseline health data values are simulated based on a normal distribution using \code{stats::rnorm()} with \code{mean = bhd_central} and a standard deviation based on corresponding lower and upper 95\% exposure confidence interval values.

Disability weights values of the morbidity health outcome of interest are simulated based on a beta distribution, as both the disability weights and the beta distribution are bounded by 0 and 1. The beta distribution best fitting the inputted central disability weight estimate and corresponding lower and upper 95\% confidence interval values is fitted using \code{stats::qgamma()} (the best fitting distribution parameters \code{shape1} and \code{shape2} are determined using \code{stats::optimize()}). Finally, \code{n_sim} disability weight values are simulated using \code{stats::rbeta()}.

Duration values of the morbidity health outcome of interest are simulated based on a normal distribution using \code{stats::rnorm()} with \code{mean = duration_central} and a standard deviation based on corresponding lower and upper 95\% exposure confidence interval values.
}
\examples{
# Goal: obtain summary uncertainty for an existing attribute_health()
# output

## First create an assessment
attribute_health_output <- attribute_health(
  erf_shape = "log_linear",
  rr_central = 1.369,
  rr_lower = 1.124,
  rr_upper = 1.664,
  rr_increment = 10,
  exp_central = 8.85,
  exp_lower = 8,
  exp_upper = 10,
  cutoff_central = 5,
  bhd_central = 30747,
  bhd_lower = 28000,
  bhd_upper = 32000
)

## Then run Monte Carlo simulation
results <- summarize_uncertainty(
  output_attribute = attribute_health_output,
  n_sim = 100
)

results$uncertainty_main$impact # Central, lower and upper estimates
}
\author{
Alberto Castro & Axel Luyten
}
